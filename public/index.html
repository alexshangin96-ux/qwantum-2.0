<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öõÔ∏è Quantum Nexus - Ultra Quantum Tapper</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #06b6d4;
            --dark: #0f172a;
            --dark-light: #1e293b;
            --gray: #64748b;
            --gray-light: #94a3b8;
            --white: #ffffff;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-hover: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.1);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
            color: var(--white);
            overflow-x: hidden;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 60%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);
            animation: backgroundFloat 25s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); }
            25% { transform: translate(-20px, -30px) scale(1.05) rotate(1deg); }
            50% { transform: translate(30px, -20px) scale(0.95) rotate(-1deg); }
            75% { transform: translate(-10px, 20px) scale(1.02) rotate(0.5deg); }
        }

        /* –ß–∞—Å—Ç–∏—Ü—ã */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--primary);
            border-radius: 50%;
            animation: particleFloat 15s linear infinite;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .header-left h1 {
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .header-left p {
            color: var(--gray-light);
            font-size: 0.9rem;
        }

        .header-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }

        .level-info {
            background: var(--glass-hover);
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--success);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .stat-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .stat-card-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--gray-light);
        }

        .stat-card-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .stat-card-icon.coins { background: rgba(16, 185, 129, 0.2); color: var(--success); }
        .stat-card-icon.hash { background: rgba(6, 182, 212, 0.2); color: var(--info); }

        .stat-card-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--white);
            margin-bottom: 5px;
            font-family: 'JetBrains Mono', monospace;
        }

        .stat-card-change {
            font-size: 0.8rem;
            color: var(--gray-light);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-card-change.positive { color: var(--success); }
        .stat-card-change.negative { color: var(--danger); }

        /* Energy Bar */
        .energy-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .energy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .energy-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .energy-regen {
            font-size: 0.8rem;
            color: var(--gray-light);
            font-family: 'JetBrains Mono', monospace;
        }

        .energy-bar-container {
            position: relative;
            background: var(--glass-hover);
            border-radius: 12px;
            height: 20px;
            overflow: hidden;
        }

        .energy-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 12px;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .energy-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: energyShimmer 2s infinite;
        }

        @keyframes energyShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .energy-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--white);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Tap Button */
        .tap-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .tap-button {
            width: 200px;
            height: 200px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-size: 3rem;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.1s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 0 30px rgba(99, 102, 241, 0.3),
                0 0 60px rgba(139, 92, 246, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            animation: tapPulse 2s ease-in-out infinite;
        }

        @keyframes tapPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 
                    0 0 30px rgba(99, 102, 241, 0.3),
                    0 0 60px rgba(139, 92, 246, 0.2),
                    inset 0 0 20px rgba(255, 255, 255, 0.1);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 
                    0 0 40px rgba(99, 102, 241, 0.4),
                    0 0 80px rgba(139, 92, 246, 0.3),
                    inset 0 0 25px rgba(255, 255, 255, 0.15);
            }
        }

        .tap-button:hover {
            transform: scale(1.1);
            animation-play-state: paused;
        }

        .tap-button:active {
            transform: scale(0.95);
            animation-play-state: paused;
        }

        .tap-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, transparent 30%, rgba(255, 255, 255, 0.1) 100%);
            border-radius: 50%;
        }

        .tap-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
        }

        .tap-button:active::after {
            width: 100%;
            height: 100%;
        }

        .tap-power {
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 6px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1;
            padding: 12px 16px;
            text-align: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--gray-light);
            white-space: nowrap;
            min-width: 80px;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: var(--shadow);
        }

        .nav-tab:hover:not(.active) {
            background: var(--glass-hover);
            color: var(--white);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Shop Section */
        .shop-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .shop-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .shop-section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        .shop-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .shop-category {
            padding: 8px 16px;
            border: 1px solid var(--border);
            border-radius: 20px;
            background: var(--glass-hover);
            color: var(--gray-light);
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .shop-category.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .shop-category:hover:not(.active) {
            background: var(--glass);
            color: var(--white);
        }

        .shop-items {
            display: grid;
            gap: 15px;
        }

        .shop-item {
            background: var(--glass-hover);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .shop-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .shop-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .shop-item-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 5px;
        }

        .shop-item-price {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--success);
            font-family: 'JetBrains Mono', monospace;
        }

        .shop-item-description {
            font-size: 0.9rem;
            color: var(--gray-light);
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .shop-item-effect {
            background: var(--glass);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 0.8rem;
            color: var(--info);
            font-weight: 600;
        }

        .shop-item-button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .shop-item-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .shop-item-button:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Mining Section */
        .mining-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .mining-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mining-section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(135deg, var(--info), var(--success));
            border-radius: 2px;
        }

        .mining-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mining-tab {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--glass-hover);
            color: var(--gray-light);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .mining-tab.active {
            background: var(--info);
            color: white;
            border-color: var(--info);
        }

        .mining-tab:hover:not(.active) {
            background: var(--glass);
            color: var(--white);
        }

        .mining-stats {
            background: var(--glass-hover);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .mining-stat {
            text-align: center;
        }

        .mining-stat-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--info);
            font-family: 'JetBrains Mono', monospace;
        }

        .mining-stat-label {
            font-size: 0.8rem;
            color: var(--gray-light);
            margin-top: 5px;
        }

        /* QuanHash Mining */
        .quanhash-mining {
            background: var(--glass-hover);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }

        .quanhash-mining h3 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quanhash-mining h3::before {
            content: '‚õèÔ∏è';
            font-size: 1.5rem;
        }

        .energy-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .energy-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--glass);
            color: var(--white);
            font-size: 14px;
            text-align: center;
        }

        .energy-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .mine-button {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--info), var(--primary));
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mine-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .mine-button:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .mining-info {
            background: var(--glass);
            border-radius: 8px;
            padding: 10px;
            font-size: 0.8rem;
            color: var(--gray-light);
            text-align: center;
        }

        /* Cards Section */
        .cards-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .cards-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cards-section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(135deg, var(--warning), var(--danger));
            border-radius: 2px;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .card-item {
            background: var(--glass-hover);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--warning);
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .card-name {
            font-size: 1rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 5px;
        }

        .card-income {
            font-size: 0.9rem;
            color: var(--success);
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }

        .card-price {
            font-size: 1.1rem;
            color: var(--warning);
            font-weight: 800;
            margin-top: 10px;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Leaderboard */
        .leaderboard-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .leaderboard-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .leaderboard-section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(135deg, var(--success), var(--warning));
            border-radius: 2px;
        }

        .leaderboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .leaderboard-tab {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--glass-hover);
            color: var(--gray-light);
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .leaderboard-tab.active {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .leaderboard-tab:hover:not(.active) {
            background: var(--glass);
            color: var(--white);
        }

        .leaderboard-list {
            display: grid;
            gap: 10px;
        }

        .leaderboard-item {
            background: var(--glass-hover);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .leaderboard-rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .leaderboard-rank.top-1 { background: linear-gradient(135deg, #ffd700, #ffed4e); color: #000; }
        .leaderboard-rank.top-2 { background: linear-gradient(135deg, #c0c0c0, #e5e5e5); color: #000; }
        .leaderboard-rank.top-3 { background: linear-gradient(135deg, #cd7f32, #daa520); color: #fff; }

        .leaderboard-info {
            flex: 1;
        }

        .leaderboard-name {
            font-weight: 600;
            color: var(--white);
            margin-bottom: 2px;
        }

        .leaderboard-value {
            font-size: 0.9rem;
            color: var(--gray-light);
            font-family: 'JetBrains Mono', monospace;
        }

        /* News Section */
        .news-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .news-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .news-section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(135deg, var(--info), var(--primary));
            border-radius: 2px;
        }

        .news-item {
            background: var(--glass-hover);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .news-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--info);
        }

        .news-item:last-child {
            margin-bottom: 0;
        }

        .news-date {
            font-size: 0.8rem;
            color: var(--gray-light);
            margin-bottom: 10px;
            font-family: 'JetBrains Mono', monospace;
        }

        .news-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 10px;
        }

        .news-content {
            font-size: 0.9rem;
            color: var(--gray-light);
            line-height: 1.5;
        }

        /* Support Section */
        .support-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
        }

        .support-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .support-section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(135deg, var(--warning), var(--danger));
            border-radius: 2px;
        }

        .support-form {
            display: grid;
            gap: 15px;
        }

        .form-group {
            display: grid;
            gap: 8px;
        }

        .form-group label {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--white);
        }

        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--glass);
            color: var(--white);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .support-button {
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--warning), var(--danger));
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .support-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            animation: slideInDown 0.3s ease-out;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-lg);
            max-width: 90%;
        }

        .notification.success {
            background: linear-gradient(135deg, var(--success), #059669);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }

        .notification.info {
            background: linear-gradient(135deg, var(--info), #0891b2);
        }

        @keyframes slideInDown {
            from { opacity: 0; transform: translateX(-50%) translateY(-100%); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tap Effects */
        .tap-effect {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--success);
            animation: tapEffectAnimation 1s ease-out forwards;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }

        @keyframes tapEffectAnimation {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(1.5);
            }
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .tap-button {
                width: 160px;
                height: 160px;
                font-size: 2.5rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .shop-categories {
                flex-wrap: wrap;
            }
            
            .cards-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }

        /* Telegram Web App specific styles */
        .tg-viewport {
            height: 100vh;
            overflow: hidden;
        }

        .tg-main-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px;
            font-weight: 600;
            cursor: pointer;
            z-index: 100;
            box-shadow: var(--shadow-lg);
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1>‚öõÔ∏è Quantum Nexus</h1>
                    <p>Ultra Quantum Tapper</p>
                </div>
                <div class="header-right">
                    <div class="level-info" id="levelInfo">
                        –£—Ä–æ–≤–µ–Ω—å <span id="userLevel">1</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-card-header">
                    <div class="stat-card-title">üí∞ –ú–æ–Ω–µ—Ç—ã</div>
                    <div class="stat-card-icon coins">üíé</div>
                </div>
                <div class="stat-card-value" id="coinsValue">0</div>
                <div class="stat-card-change positive" id="coinsPerHour">
                    <span>‚Üó</span>
                    <span>+0/—á–∞—Å</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-card-header">
                    <div class="stat-card-title">‚õèÔ∏è QuanHash</div>
                    <div class="stat-card-icon hash">üîó</div>
                </div>
                <div class="stat-card-value" id="hashValue">0</div>
                <div class="stat-card-change positive" id="hashPerHour">
                    <span>‚Üó</span>
                    <span>+0/—á–∞—Å</span>
                </div>
            </div>
        </div>

        <!-- Energy Bar -->
        <div class="energy-section">
            <div class="energy-header">
                <div class="energy-title">
                    <span>‚ö°</span>
                    <span>–≠–Ω–µ—Ä–≥–∏—è</span>
                </div>
                <div class="energy-regen" id="energyRegen">+0.1/—Å–µ–∫</div>
            </div>
            <div class="energy-bar-container">
                <div class="energy-bar" id="energyBar" style="width: 100%"></div>
                <div class="energy-text" id="energyText">1000/1000</div>
            </div>
        </div>

        <!-- Tap Button -->
        <div class="tap-section">
            <button class="tap-button" id="tapButton" onclick="tap()">
                ‚öõÔ∏è
            </button>
            <div class="tap-power" id="tapPower">+1 –∑–∞ –∫–ª–∏–∫</div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="switchTab('shop')">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
            <div class="nav-tab" onclick="switchTab('mining')">‚õèÔ∏è –ú–∞–π–Ω–∏–Ω–≥</div>
            <div class="nav-tab" onclick="switchTab('cards')">üÉè –ö–∞—Ä—Ç—ã</div>
            <div class="nav-tab" onclick="switchTab('leaderboard')">üèÜ –¢–æ–ø</div>
            <div class="nav-tab" onclick="switchTab('news')">üì∞ –ù–æ–≤–æ—Å—Ç–∏</div>
            <div class="nav-tab" onclick="switchTab('support')">üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
        </div>

        <!-- Shop Tab -->
        <div class="tab-content active" id="shopTab">
            <div class="shop-section">
                <h2>üõí –ú–∞–≥–∞–∑–∏–Ω –ë—É—Å—Ç–æ–≤</h2>
                <div class="shop-categories">
                    <div class="shop-category active" onclick="switchShopCategory('tap')">–¢–∞–ø</div>
                    <div class="shop-category" onclick="switchShopCategory('energy')">–≠–Ω–µ—Ä–≥–∏—è</div>
                    <div class="shop-category" onclick="switchShopCategory('passive')">–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥</div>
                    <div class="shop-category" onclick="switchShopCategory('auto')">–ê–≤—Ç–æ—Ç–∞–ø</div>
                </div>
                
                <div class="shop-items" id="shopItems">
                    <!-- Shop items will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Mining Tab -->
        <div class="tab-content" id="miningTab">
            <div class="mining-section">
                <h2>‚õèÔ∏è –ú–∞–π–Ω–∏–Ω–≥ QuanHash</h2>
                <div class="mining-tabs">
                    <div class="mining-tab active" onclick="switchMiningTab('machines')">–ú–∞—à–∏–Ω—ã</div>
                    <div class="mining-tab" onclick="switchMiningTab('premium')">–ü—Ä–µ–º–∏—É–º</div>
                    <div class="mining-tab" onclick="switchMiningTab('manual')">–†—É—á–Ω–∞—è –¥–æ–±—ã—á–∞</div>
                </div>
                
                <div class="mining-stats">
                    <div class="mining-stat">
                        <div class="mining-stat-value" id="totalHashPerHour">0</div>
                        <div class="mining-stat-label">QuanHash/—á–∞—Å</div>
                    </div>
                    <div class="mining-stat">
                        <div class="mining-stat-value" id="totalMachines">0</div>
                        <div class="mining-stat-label">–ú–∞—à–∏–Ω</div>
                    </div>
                </div>
                
                <div class="mining-content" id="miningContent">
                    <!-- Mining content will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Cards Tab -->
        <div class="tab-content" id="cardsTab">
            <div class="cards-section">
                <h2>üÉè –ö–æ–ª–ª–µ–∫—Ü–∏—è –ö–∞—Ä—Ç</h2>
                <div class="cards-grid" id="cardsGrid">
                    <!-- Cards will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Leaderboard Tab -->
        <div class="tab-content" id="leaderboardTab">
            <div class="leaderboard-section">
                <h2>üèÜ –õ–∏–¥–µ—Ä–±–æ—Ä–¥</h2>
                <div class="leaderboard-tabs">
                    <div class="leaderboard-tab active" onclick="switchLeaderboardTab('coins')">–ú–æ–Ω–µ—Ç—ã</div>
                    <div class="leaderboard-tab" onclick="switchLeaderboardTab('hash')">QuanHash</div>
                </div>
                <div class="leaderboard-list" id="leaderboardList">
                    <!-- Leaderboard will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- News Tab -->
        <div class="tab-content" id="newsTab">
            <div class="news-section">
                <h2>üì∞ –ù–æ–≤–æ—Å—Ç–∏ Quantum Nexus</h2>
                <div id="newsContent">
                    <!-- News will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Support Tab -->
        <div class="tab-content" id="supportTab">
            <div class="support-section">
                <h2>üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h2>
                <form class="support-form" id="supportForm">
                    <div class="form-group">
                        <label for="supportCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º—ã:</label>
                        <select id="supportCategory" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                            <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</option>
                            <option value="gameplay">–ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å</option>
                            <option value="balance">–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–ª–∞–Ω—Å–æ–º</option>
                            <option value="bug">–û—à–∏–±–∫–∏ –∏ –±–∞–≥–∏</option>
                            <option value="suggestion">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</option>
                            <option value="other">–î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="supportMessage">–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:</label>
                        <textarea id="supportMessage" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ..." required></textarea>
                    </div>
                    <button type="submit" class="support-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameState = {
            user: null,
            coins: 0,
            quanhash: 0,
            level: 1,
            experience: 0,
            energy: 1000,
            maxEnergy: 1000,
            energyRegenRate: 0.1,
            coinsPerHour: 0,
            hashPerHour: 0,
            tapPower: 1,
            autoTapHours: 0,
            autoTapEndTime: 0,
            isBanned: false,
            isFrozen: false,
            freezeEndTime: 0,
            offlineCoins: 0,
            offlineHash: 0,
            hoursOffline: 0
        };

        let currentTab = 'shop';
        let currentShopCategory = 'tap';
        let currentMiningTab = 'machines';
        let currentLeaderboardTab = 'coins';

        // Initialize Telegram Web App
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
            window.Telegram.WebApp.MainButton.hide();
        }

        // Create particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 20;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Initialize game
        async function initGame() {
            try {
                // Get Telegram init data
                const initData = window.Telegram?.WebApp?.initData || '';
                
                const response = await fetch('/api/auth', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': initData
                    },
                    body: JSON.stringify({ initData })
                });

                const data = await response.json();
                
                if (data.success) {
                    gameState = { ...gameState, ...data.user };
                    updateUI();
                    
                    // Show offline earnings notification
                    if (gameState.offlineCoins > 0 || gameState.offlineHash > 0) {
                        showNotification(
                            `üí∞ –û—Ñ—Ñ–ª–∞–π–Ω –¥–æ—Ö–æ–¥: ${gameState.offlineCoins.toLocaleString()} –º–æ–Ω–µ—Ç, ${gameState.offlineHash.toLocaleString()} QuanHash –∑–∞ ${gameState.hoursOffline}—á`,
                            'success'
                        );
                    }
                    
                    loadShopItems();
                    loadMiningContent();
                    loadCards();
                    loadLeaderboard();
                    loadNews();
                } else {
                    showNotification('‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏!', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É!', 'error');
            }
        }

        // Update UI
        function updateUI() {
            document.getElementById('coinsValue').textContent = gameState.coins.toLocaleString();
            document.getElementById('hashValue').textContent = gameState.quanhash.toLocaleString();
            document.getElementById('userLevel').textContent = gameState.level;
            document.getElementById('tapPower').textContent = `+${gameState.tapPower} –∑–∞ –∫–ª–∏–∫`;
            document.getElementById('coinsPerHour').innerHTML = `<span>‚Üó</span><span>+${gameState.coinsPerHour}/—á–∞—Å</span>`;
            document.getElementById('hashPerHour').innerHTML = `<span>‚Üó</span><span>+${gameState.hashPerHour}/—á–∞—Å</span>`;
            
            // Update energy
            const energyPercent = (gameState.energy / gameState.maxEnergy) * 100;
            document.getElementById('energyBar').style.width = energyPercent + '%';
            document.getElementById('energyText').textContent = `${gameState.energy}/${gameState.maxEnergy}`;
            document.getElementById('energyRegen').textContent = `+${gameState.energyRegenRate}/—Å–µ–∫`;
            
            // Update mining stats
            document.getElementById('totalHashPerHour').textContent = gameState.hashPerHour.toLocaleString();
        }

        // Tap function
        async function tap() {
            if (gameState.energy < 1) {
                showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 'error');
                return;
            }

            try {
                const response = await fetch('/api/tap', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': window.Telegram?.WebApp?.initData || ''
                    }
                });

                const data = await response.json();
                
                if (data.success) {
                    gameState.coins += data.coinsEarned;
                    gameState.experience += data.experienceEarned;
                    gameState.energy = data.newEnergy;
                    
                    updateUI();
                    
                    // Show tap effect
                    showTapEffect(data.coinsEarned);
                    
                    // Check for level up
                    const newLevel = Math.floor(gameState.experience / 1000) + 1;
                    if (newLevel > gameState.level) {
                        gameState.level = newLevel;
                        showNotification(`üéâ –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω –¥–æ ${newLevel}!`, 'success');
                        updateUI();
                    }
                } else {
                    showNotification(data.error || '‚ùå –û—à–∏–±–∫–∞ —Ç–∞–ø–∞!', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ç–∞–ø–∞:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!', 'error');
            }
        }

        // Show tap effect
        function showTapEffect(amount) {
            const effect = document.createElement('div');
            effect.className = 'tap-effect';
            effect.textContent = `+${amount}`;
            effect.style.left = Math.random() * 200 + 140 + 'px';
            effect.style.top = Math.random() * 100 + 300 + 'px';
            document.body.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 1000);
        }

        // Switch tabs
        function switchTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.nav-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tab + 'Tab').classList.add('active');
            
            currentTab = tab;
        }

        // Shop functions
        function switchShopCategory(category) {
            document.querySelectorAll('.shop-category').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            currentShopCategory = category;
            loadShopItems();
        }

        function loadShopItems() {
            const shopItems = {
                tap: [
                    { id: 'tap_power_1', name: '–£—Å–∏–ª–∏—Ç–µ–ª—å –¢–∞–ø–∞', price: 100, description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É —Ç–∞–ø–∞', effect: '+1 –∫ —Å–∏–ª–µ —Ç–∞–ø–∞', coinsPerHour: 0 },
                    { id: 'tap_power_5', name: '–ú–µ–≥–∞ –£—Å–∏–ª–∏—Ç–µ–ª—å', price: 450, description: '–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É —Ç–∞–ø–∞', effect: '+5 –∫ —Å–∏–ª–µ —Ç–∞–ø–∞', coinsPerHour: 0 },
                    { id: 'tap_power_10', name: '–£–ª—å—Ç—Ä–∞ –£—Å–∏–ª–∏—Ç–µ–ª—å', price: 800, description: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É —Ç–∞–ø–∞', effect: '+10 –∫ —Å–∏–ª–µ —Ç–∞–ø–∞', coinsPerHour: 0 }
                ],
                energy: [
                    { id: 'energy_capacity', name: '–†–∞—Å—à–∏—Ä–∏—Ç–µ–ª—å –≠–Ω–µ—Ä–≥–∏–∏', price: 200, description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é', effect: '+100 –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏', coinsPerHour: 0 },
                    { id: 'energy_regen', name: '–†–µ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä', price: 300, description: '–£—Å–∫–æ—Ä—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏', effect: '+0.1 –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è', coinsPerHour: 0 }
                ],
                passive: [
                    { id: 'coins_per_hour_50', name: '–ü–∞—Å—Å–∏–≤–Ω—ã–π –î–æ—Ö–æ–¥', price: 500, description: '–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–Ω–µ—Ç—ã –∫–∞–∂–¥—ã–π —á–∞—Å', effect: '+50 –º–æ–Ω–µ—Ç/—á–∞—Å', coinsPerHour: 50 },
                    { id: 'coins_per_hour_100', name: '–£—Å–∏–ª–µ–Ω–Ω—ã–π –î–æ—Ö–æ–¥', price: 900, description: '–ë–æ–ª—å—à–µ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞', effect: '+100 –º–æ–Ω–µ—Ç/—á–∞—Å', coinsPerHour: 100 },
                    { id: 'coins_per_hour_200', name: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –î–æ—Ö–æ–¥', price: 1600, description: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥', effect: '+200 –º–æ–Ω–µ—Ç/—á–∞—Å', coinsPerHour: 200 }
                ],
                auto: [
                    { id: 'auto_tap_1h', name: '–ê–≤—Ç–æ—Ç–∞–ø 1—á', price: 1000, description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–ø –Ω–∞ 1 —á–∞—Å', effect: '–ê–≤—Ç–æ—Ç–∞–ø –Ω–∞ 1 —á–∞—Å', coinsPerHour: 0 },
                    { id: 'auto_tap_3h', name: '–ê–≤—Ç–æ—Ç–∞–ø 3—á', price: 2500, description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–ø –Ω–∞ 3 —á–∞—Å–∞', effect: '–ê–≤—Ç–æ—Ç–∞–ø –Ω–∞ 3 —á–∞—Å–∞', coinsPerHour: 0 },
                    { id: 'auto_tap_12h', name: '–ê–≤—Ç–æ—Ç–∞–ø 12—á', price: 8000, description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–ø –Ω–∞ 12 —á–∞—Å–æ–≤', effect: '–ê–≤—Ç–æ—Ç–∞–ø –Ω–∞ 12 —á–∞—Å–æ–≤', coinsPerHour: 0 },
                    { id: 'auto_tap_24h', name: '–ê–≤—Ç–æ—Ç–∞–ø 24—á', price: 15000, description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–ø –Ω–∞ 24 —á–∞—Å–∞', effect: '–ê–≤—Ç–æ—Ç–∞–ø –Ω–∞ 24 —á–∞—Å–∞', coinsPerHour: 0 }
                ]
            };

            const items = shopItems[currentShopCategory] || [];
            const container = document.getElementById('shopItems');
            
            container.innerHTML = items.map(item => `
                <div class="shop-item">
                    <div class="shop-item-header">
                        <div>
                            <div class="shop-item-title">${item.name}</div>
                            <div class="shop-item-description">${item.description}</div>
                        </div>
                        <div class="shop-item-price">${item.price.toLocaleString()}</div>
                    </div>
                    <div class="shop-item-effect">${item.effect}</div>
                    <button class="shop-item-button" onclick="buyBoost('${item.id}')" ${gameState.coins < item.price ? 'disabled' : ''}>
                        ${gameState.coins < item.price ? '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç' : '–ö—É–ø–∏—Ç—å'}
                    </button>
                </div>
            `).join('');
        }

        async function buyBoost(boostId) {
            try {
                const response = await fetch('/api/buy-boost', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': window.Telegram?.WebApp?.initData || ''
                    },
                    body: JSON.stringify({ boostId, boostType: 'boost' })
                });

                const data = await response.json();
                
                if (data.success) {
                    showNotification(data.message, 'success');
                    gameState.coins = data.newBalance;
                    updateUI();
                    loadShopItems();
                } else {
                    showNotification(data.error || '‚ùå –û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏!', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!', 'error');
            }
        }

        // Mining functions
        function switchMiningTab(tab) {
            document.querySelectorAll('.mining-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            currentMiningTab = tab;
            loadMiningContent();
        }

        function loadMiningContent() {
            const container = document.getElementById('miningContent');
            
            if (currentMiningTab === 'machines') {
                const machines = [
                    { id: 'basic_miner', name: '–ë–∞–∑–æ–≤—ã–π –ú–∞–π–Ω–µ—Ä', price: 1000, hashPerHour: 10, description: '–ü—Ä–æ—Å—Ç–∞—è –º–∞–π–Ω–∏–Ω–≥ –º–∞—à–∏–Ω–∞' },
                    { id: 'advanced_miner', name: '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ú–∞–π–Ω–µ—Ä', price: 5000, hashPerHour: 50, description: '–£–ª—É—á—à–µ–Ω–Ω–∞—è –º–∞–π–Ω–∏–Ω–≥ –º–∞—à–∏–Ω–∞' },
                    { id: 'quantum_miner', name: '–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ú–∞–π–Ω–µ—Ä', price: 15000, hashPerHour: 150, description: '–í—ã—Å–æ–∫–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω—ã–π –º–∞–π–Ω–µ—Ä' },
                    { id: 'nexus_miner', name: 'Nexus –ú–∞–π–Ω–µ—Ä', price: 50000, hashPerHour: 500, description: '–≠–ª–∏—Ç–Ω–∞—è –º–∞–π–Ω–∏–Ω–≥ –º–∞—à–∏–Ω–∞' },
                    { id: 'ultra_miner', name: '–£–ª—å—Ç—Ä–∞ –ú–∞–π–Ω–µ—Ä', price: 150000, hashPerHour: 1500, description: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –º–∞–π–Ω–∏–Ω–≥ –º–∞—à–∏–Ω–∞' }
                ];
                
                container.innerHTML = machines.map(machine => `
                    <div class="shop-item">
                        <div class="shop-item-header">
                            <div>
                                <div class="shop-item-title">${machine.name}</div>
                                <div class="shop-item-description">${machine.description}</div>
                            </div>
                            <div class="shop-item-price">${machine.price.toLocaleString()}</div>
                        </div>
                        <div class="shop-item-effect">+${machine.hashPerHour} QuanHash/—á–∞—Å</div>
                        <button class="shop-item-button" onclick="buyMiningMachine('${machine.id}')" ${gameState.coins < machine.price ? 'disabled' : ''}>
                            ${gameState.coins < machine.price ? '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç' : '–ö—É–ø–∏—Ç—å –∑–∞ –º–æ–Ω–µ—Ç—ã'}
                        </button>
                    </div>
                `).join('');
            } else if (currentMiningTab === 'premium') {
                const premiumMachines = [
                    { id: 'quantum_core', name: '–ö–≤–∞–Ω—Ç–æ–≤–æ–µ –Ø–¥—Ä–æ', price: 1000, hashPerHour: 1000, description: '–ü—Ä–µ–º–∏—É–º –º–∞–π–Ω–∏–Ω–≥ —è–¥—Ä–æ' },
                    { id: 'nexus_core', name: 'Nexus –Ø–¥—Ä–æ', price: 5000, hashPerHour: 5000, description: '–≠–ª–∏—Ç–Ω–æ–µ –º–∞–π–Ω–∏–Ω–≥ —è–¥—Ä–æ' },
                    { id: 'ultra_core', name: '–£–ª—å—Ç—Ä–∞ –Ø–¥—Ä–æ', price: 15000, hashPerHour: 15000, description: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ –º–∞–π–Ω–∏–Ω–≥ —è–¥—Ä–æ' },
                    { id: 'infinity_core', name: '–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –Ø–¥—Ä–æ', price: 50000, hashPerHour: 50000, description: '–ú–∏—Ñ–∏—á–µ—Å–∫–æ–µ –º–∞–π–Ω–∏–Ω–≥ —è–¥—Ä–æ' },
                    { id: 'cosmic_core', name: '–ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ –Ø–¥—Ä–æ', price: 150000, hashPerHour: 150000, description: '–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–∞–π–Ω–∏–Ω–≥ —è–¥—Ä–æ' }
                ];
                
                container.innerHTML = premiumMachines.map(machine => `
                    <div class="shop-item">
                        <div class="shop-item-header">
                            <div>
                                <div class="shop-item-title">${machine.name}</div>
                                <div class="shop-item-description">${machine.description}</div>
                            </div>
                            <div class="shop-item-price">${machine.price.toLocaleString()} QuanHash</div>
                        </div>
                        <div class="shop-item-effect">+${machine.hashPerHour} QuanHash/—á–∞—Å</div>
                        <button class="shop-item-button" onclick="buyPremiumMachine('${machine.id}')" ${gameState.quanhash < machine.price ? 'disabled' : ''}>
                            ${gameState.quanhash < machine.price ? '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ QuanHash' : '–ö—É–ø–∏—Ç—å –∑–∞ QuanHash'}
                        </button>
                    </div>
                `).join('');
            } else if (currentMiningTab === 'manual') {
                container.innerHTML = `
                    <div class="quanhash-mining">
                        <h3>–†—É—á–Ω–∞—è –¥–æ–±—ã—á–∞ QuanHash</h3>
                        <div class="energy-input-group">
                            <input type="number" class="energy-input" id="energyAmount" placeholder="–≠–Ω–µ—Ä–≥–∏—è" min="10" max="100" value="10">
                            <button class="mine-button" onclick="mineQuanHash()">–î–æ–±—ã—Ç—å</button>
                        </div>
                        <div class="mining-info">
                            üí° –î–æ—Ä–æ–≥–æ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±—ã–≤–∞—Ç—å QuanHash –≤—Ä—É—á–Ω—É—é –∑–∞ —ç–Ω–µ—Ä–≥–∏—é
                        </div>
                    </div>
                `;
            }
        }

        async function buyMiningMachine(machineId) {
            try {
                const response = await fetch('/api/buy-mining-machine', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': window.Telegram?.WebApp?.initData || ''
                    },
                    body: JSON.stringify({ machineId })
                });

                const data = await response.json();
                
                if (data.success) {
                    showNotification(data.message, 'success');
                    gameState.coins = data.newBalance;
                    gameState.hashPerHour = data.newHashPerHour;
                    updateUI();
                    loadMiningContent();
                } else {
                    showNotification(data.error || '‚ùå –û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏!', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏ –º–∞—à–∏–Ω—ã:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!', 'error');
            }
        }

        async function buyPremiumMachine(machineId) {
            try {
                const response = await fetch('/api/buy-premium-machine', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': window.Telegram?.WebApp?.initData || ''
                    },
                    body: JSON.stringify({ machineId })
                });

                const data = await response.json();
                
                if (data.success) {
                    showNotification(data.message, 'success');
                    gameState.quanhash = data.newQuanHash;
                    gameState.hashPerHour = data.newHashPerHour;
                    updateUI();
                    loadMiningContent();
                } else {
                    showNotification(data.error || '‚ùå –û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏!', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏ –ø—Ä–µ–º–∏—É–º –º–∞—à–∏–Ω—ã:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!', 'error');
            }
        }

        async function mineQuanHash() {
            const energyAmount = parseInt(document.getElementById('energyAmount').value);
            
            if (!energyAmount || energyAmount < 10 || energyAmount > 100) {
                showNotification('‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–Ω–µ—Ä–≥–∏–∏ –æ—Ç 10 –¥–æ 100!', 'error');
                return;
            }

            try {
                const response = await fetch('/api/mine-quanhash', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': window.Telegram?.WebApp?.initData || ''
                    },
                    body: JSON.stringify({ energyAmount })
                });

                const data = await response.json();
                
                if (data.success) {
                    showNotification(data.message, 'success');
                    gameState.quanhash = data.newQuanHash;
                    gameState.energy = data.newEnergy;
                    updateUI();
                } else {
                    showNotification(data.error || '‚ùå –û—à–∏–±–∫–∞ –¥–æ–±—ã—á–∏!', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ–±—ã—á–∏ QuanHash:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!', 'error');
            }
        }

        // Cards functions
        function loadCards() {
            const cards = [
                { id: 'quantum_card', name: '–ö–≤–∞–Ω—Ç–æ–≤–∞—è –ö–∞—Ä—Ç–∞', icon: '‚öõÔ∏è', income: 25, price: 1000 },
                { id: 'nexus_card', name: 'Nexus –ö–∞—Ä—Ç–∞', icon: 'üîó', income: 50, price: 2500 },
                { id: 'ultra_card', name: '–£–ª—å—Ç—Ä–∞ –ö–∞—Ä—Ç–∞', icon: 'üíé', income: 100, price: 5000 },
                { id: 'infinity_card', name: '–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ö–∞—Ä—Ç–∞', icon: '‚ôæÔ∏è', income: 250, price: 10000 },
                { id: 'cosmic_card', name: '–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –ö–∞—Ä—Ç–∞', icon: 'üåå', income: 500, price: 25000 }
            ];
            
            const container = document.getElementById('cardsGrid');
            container.innerHTML = cards.map(card => `
                <div class="card-item">
                    <div class="card-icon">${card.icon}</div>
                    <div class="card-name">${card.name}</div>
                    <div class="card-income">+${card.income}/—á–∞—Å</div>
                    <div class="card-price">${card.price.toLocaleString()} –º–æ–Ω–µ—Ç</div>
                </div>
            `).join('');
        }

        // Leaderboard functions
        function switchLeaderboardTab(tab) {
            document.querySelectorAll('.leaderboard-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            currentLeaderboardTab = tab;
            loadLeaderboard();
        }

        async function loadLeaderboard() {
            try {
                const response = await fetch(`/api/leaderboard?limit=10&type=${currentLeaderboardTab}`);
                const data = await response.json();
                
                if (data.success) {
                    const container = document.getElementById('leaderboardList');
                    container.innerHTML = data.leaderboard.map((player, index) => `
                        <div class="leaderboard-item">
                            <div class="leaderboard-rank ${index < 3 ? `top-${index + 1}` : ''}">${index + 1}</div>
                            <div class="leaderboard-info">
                                <div class="leaderboard-name">${player.username || '–ò–≥—Ä–æ–∫'}</div>
                                <div class="leaderboard-value">
                                    ${currentLeaderboardTab === 'coins' ? 
                                        player.balance.toLocaleString() + ' –º–æ–Ω–µ—Ç' : 
                                        player.quanhash.toLocaleString() + ' QuanHash'
                                    }
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞:', error);
            }
        }

        // News functions
        async function loadNews() {
            const news = [
                {
                    date: '15 —è–Ω–≤–∞—Ä—è 2025',
                    title: 'üöÄ –ó–∞–ø—É—Å–∫ Quantum Nexus 2.0',
                    content: '–ú—ã —Ä–∞–¥—ã –æ–±—ä—è–≤–∏—Ç—å –æ –∑–∞–ø—É—Å–∫–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ Quantum Nexus! –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏, —É–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤.'
                },
                {
                    date: '10 —è–Ω–≤–∞—Ä—è 2025',
                    title: 'üìà –ü–ª–∞–Ω—ã –Ω–∞ –ª–∏—Å—Ç–∏–Ω–≥ QuanHash',
                    content: '–ö–æ–º–∞–Ω–¥–∞ Quantum Nexus –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –∫ –ª–∏—Å—Ç–∏–Ω–≥—É –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã QuanHash –Ω–∞ –∫—Ä—É–ø–Ω—ã—Ö –±–∏—Ä–∂–∞—Ö. –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –ª–∏—Å—Ç–∏–Ω–≥–∞ - –º–∞—Ä—Ç 2025 –≥–æ–¥–∞.'
                },
                {
                    date: '5 —è–Ω–≤–∞—Ä—è 2025',
                    title: 'üéâ –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è',
                    content: '–í —á–µ—Å—Ç—å –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞ –≤—Å–µ –∏–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –±–æ–Ω—É—Å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã –∏ —É—Å–∫–æ—Ä–µ–Ω–Ω—É—é –¥–æ–±—ã—á—É QuanHash –¥–æ –∫–æ–Ω—Ü–∞ —è–Ω–≤–∞—Ä—è!'
                }
            ];
            
            const container = document.getElementById('newsContent');
            container.innerHTML = news.map(item => `
                <div class="news-item">
                    <div class="news-date">${item.date}</div>
                    <div class="news-title">${item.title}</div>
                    <div class="news-content">${item.content}</div>
                </div>
            `).join('');
        }

        // Support functions
        document.getElementById('supportForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const category = document.getElementById('supportCategory').value;
            const message = document.getElementById('supportMessage').value;
            
            try {
                const response = await fetch('/api/support', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': window.Telegram?.WebApp?.initData || ''
                    },
                    body: JSON.stringify({ category, message })
                });

                const data = await response.json();
                
                if (data.success) {
                    showNotification(data.message, 'success');
                    document.getElementById('supportForm').reset();
                } else {
                    showNotification(data.error || '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏!', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!', 'error');
            }
        });

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        // Energy regeneration
        setInterval(() => {
            if (gameState.energy < gameState.maxEnergy) {
                gameState.energy = Math.min(gameState.energy + gameState.energyRegenRate, gameState.maxEnergy);
                updateUI();
            }
        }, 1000);

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            initGame();
        });
    </script>
</body>
</html>